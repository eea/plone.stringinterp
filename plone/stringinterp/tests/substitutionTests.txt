Base Substitution Lookup Tests
==============================

Test and demonstrate looking up string substitutions
via named adapters.

Setup
-----

    >>> from zope.component import getAdapter, queryAdapter
    >>> from plone.stringinterp.interfaces import IStringSubstitution
    >>> apage = self.portal['front-page']


Negative Cases
--------------

We shouldn't get an adapter where we haven't defined one::

    >>> queryAdapter(self.app, IStringSubstitution, 'Title')

    >>> queryAdapter(self.portal, IStringSubstitution, 'NoTitle')



Basic Content
-------------

Ask for an adapter to get the URL::

    >>> adapter = getAdapter(apage, IStringSubstitution, 'absolute_url')

    >>> adapter
    <plone.stringinterp.adapters.UrlSubstitution object at ...>

    >>> adapter()
    'http://nohost/plone/front-page'

'url' is an alias for absolute_url::

    >>> getAdapter(apage, IStringSubstitution, 'url')()
    'http://nohost/plone/front-page'



Minimal Dublin Core
-------------------

Ask for an adapter to get the title::

    >>> getAdapter(apage, IStringSubstitution, 'Title')()
    'Welcome to Plone'

Title is aliased to title::

    >>> getAdapter(apage, IStringSubstitution, 'title')()
    'Welcome to Plone'


The rest of Minimal Dublin::

    >>> getAdapter(apage, IStringSubstitution, 'Description')()
    'Congratulations! You have successfully installed Plone.'

    >>> getAdapter(apage, IStringSubstitution, 'Type')()
    u'Page'


Let's try some non-ASCII::

   >>> apage.setTitle('Plone in EspaÃ±ol'.decode('utf8'))
   >>> getAdapter(apage, IStringSubstitution, 'title')()
   'Plone in Espa\xc3\xb1ol'

